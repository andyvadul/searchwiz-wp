(()=>{const{createElement:e,useState:r,useEffect:a}=wp.element,t=({container:t,config:s})=>{const[i,c]=r(""),[o,n]=r([]),[l,d]=r(!1),[h,u]=r(null),[m,p]=r(0),w=t.dataset.theme||"modern",z=t.dataset.placeholder||"Search...",f=(t.dataset.showFilters,"true"===t.dataset.showCount),g=async e=>{if(!e.trim())return n([]),void p(0);d(!0),u(null);try{const r=await wp.apiFetch({path:"searchwiz/v1/search",method:"POST",data:{query:e,filters:{},page:1}});n(r.results||[]),p(r.total_results||0)}catch(e){console.error("SearchWiz search error:",e),u(e.message),n([])}finally{d(!1)}};return a(()=>{const e=setTimeout(()=>{g(i)},300);return()=>clearTimeout(e)},[i]),e("div",{className:`searchwiz-app searchwiz-theme-${w}`},e("form",{onSubmit:e=>{e.preventDefault(),g(i)},className:"searchwiz-search-form"},e("div",{className:"searchwiz-input-group"},e("input",{type:"text",value:i,onChange:e=>c(e.target.value),placeholder:z,className:"searchwiz-search-input",disabled:l}),e("button",{type:"submit",className:"searchwiz-search-button",disabled:l||!i.trim()},l?"â³":"ðŸ”"))),f&&m>0&&e("div",{className:"searchwiz-results-count"},`Found ${m} result${1!==m?"s":""} for "${i}"`),h&&e("div",{className:"searchwiz-error"},`âš ï¸ Search error: ${h}`),l&&e("div",{className:"searchwiz-loading"},e("div",{className:"searchwiz-spinner"},"â³"),"Searching..."),o.length>0&&e("div",{className:"searchwiz-results"},o.map(r=>e("article",{key:r.id,className:"searchwiz-result-item"},e("h3",{className:"searchwiz-result-title"},e("a",{href:r.url,target:"_blank",rel:"noopener noreferrer"},r.title)),r.excerpt&&e("p",{className:"searchwiz-result-excerpt"},r.excerpt),e("div",{className:"searchwiz-result-meta"},e("span",{className:"searchwiz-result-type"},r.type),r.author&&e("span",{className:"searchwiz-result-author"},`by ${r.author}`),e("span",{className:"searchwiz-result-date"},new Date(r.date).toLocaleDateString()))))),i&&!l&&0===o.length&&!h&&e("div",{className:"searchwiz-no-results"},`No results found for "${i}". Try different keywords.`))},s=()=>{if("undefined"==typeof wp||void 0===wp.element)return void console.error("SearchWiz: WordPress React (wp.element) not loaded");const r=window.searchwizConfig||{};if(!r.ajaxUrl)return void console.error("SearchWiz: ajaxUrl not configured. Please ensure wp_localize_script is properly set up.");const a=document.querySelectorAll(".searchwiz-search-container");console.log(`SearchWiz: Found ${a.length} container(s)`),a.forEach((a,s)=>{try{const i=a.querySelector(".searchwiz-loading-placeholder");i&&i.remove(),wp.element.render(e(t,{container:a,config:r}),a),console.log(`SearchWiz: Initialized container ${s+1}`)}catch(e){console.error(`SearchWiz: Failed to initialize container ${s+1}:`,e),a.innerHTML=`\n                <div class="searchwiz-init-error" style="padding: 16px; background: #ffebee; border: 1px solid #f44336; border-radius: 4px; color: #c62828;">\n                    <strong>SearchWiz Error:</strong> Failed to initialize React component.\n                    <br><small>${e.message}</small>\n                </div>\n            `}})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s(),window.SearchWizApp=t,window.initializeSearchWiz=s})();