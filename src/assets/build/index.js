(()=>{const{createElement:e,useState:a,useEffect:r}=wp.element,t=({container:t,config:s})=>{const[i,c]=a(""),[n,o]=a([]),[l,d]=a(!1),[h,u]=a(null),[m,p]=a(0),w=t.dataset.theme||"modern",z=t.dataset.placeholder||"Search...",f=(t.dataset.showFilters,"true"===t.dataset.showCount),g=async e=>{if(!e.trim())return o([]),void p(0);d(!0),u(null);try{const a=await wp.apiFetch({path:"searchwiz/v1/search",method:"POST",data:{query:e,filters:{},page:1}});o(a.results||[]),p(a.total_results||0)}catch(e){console.error("SearchWiz search error:",e),u(e.message),o([])}finally{d(!1)}};return r(()=>{const e=setTimeout(()=>{g(i)},300);return()=>clearTimeout(e)},[i]),e("div",{className:`searchwiz-app searchwiz-theme-${w}`},e("form",{onSubmit:e=>{e.preventDefault(),g(i)},className:"searchwiz-search-form"},e("div",{className:"searchwiz-input-group"},e("input",{type:"text",value:i,onChange:e=>c(e.target.value),placeholder:z,className:"searchwiz-search-input",disabled:l}),e("button",{type:"submit",className:"searchwiz-search-button",disabled:l||!i.trim()},l?"â³":"ðŸ”"))),f&&m>0&&e("div",{className:"searchwiz-results-count"},`Found ${m} result${1!==m?"s":""} for "${i}"`),h&&e("div",{className:"searchwiz-error"},`âš ï¸ Search error: ${h}`),l&&e("div",{className:"searchwiz-loading"},e("div",{className:"searchwiz-spinner"},"â³"),"Searching..."),n.length>0&&e("div",{className:"searchwiz-results"},n.map(a=>e("article",{key:a.id,className:"searchwiz-result-item"},e("h3",{className:"searchwiz-result-title"},e("a",{href:a.url,target:"_blank",rel:"noopener noreferrer"},a.title)),a.excerpt&&e("p",{className:"searchwiz-result-excerpt"},a.excerpt),e("div",{className:"searchwiz-result-meta"},e("span",{className:"searchwiz-result-type"},a.type),a.author&&e("span",{className:"searchwiz-result-author"},`by ${a.author}`),e("span",{className:"searchwiz-result-date"},new Date(a.date).toLocaleDateString()))))),i&&!l&&0===n.length&&!h&&e("div",{className:"searchwiz-no-results"},`No results found for "${i}". Try different keywords.`))},s=()=>{if("undefined"==typeof wp||void 0===wp.element)return void console.error("SearchWiz: WordPress React (wp.element) not loaded");const a=window.searchwizConfig||{restUrl:"/wp-json/searchwiz/v1/",nonce:"",ajaxUrl:"/wp-admin/admin-ajax.php"},r=document.querySelectorAll(".searchwiz-search-container");console.log(`SearchWiz: Found ${r.length} container(s)`),r.forEach((r,s)=>{try{const i=r.querySelector(".searchwiz-loading-placeholder");i&&i.remove(),wp.element.render(e(t,{container:r,config:a}),r),console.log(`SearchWiz: Initialized container ${s+1}`)}catch(e){console.error(`SearchWiz: Failed to initialize container ${s+1}:`,e),r.innerHTML=`\n                <div class="searchwiz-init-error" style="padding: 16px; background: #ffebee; border: 1px solid #f44336; border-radius: 4px; color: #c62828;">\n                    <strong>SearchWiz Error:</strong> Failed to initialize React component.\n                    <br><small>${e.message}</small>\n                </div>\n            `}})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s(),window.SearchWizApp=t,window.initializeSearchWiz=s})();